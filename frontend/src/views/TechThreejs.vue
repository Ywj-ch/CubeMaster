<template>
  <div class="tech-doc-page threejs-doc">
    <div class="page-container">
      <!-- è¿”å› About é¡µé¢æŒ‰é’® -->
      <header class="tech-doc-header">
        <button @click="goBackToAbout" class="minimal-back-btn">
          <el-icon><ArrowLeft /></el-icon>
          <span>BACK TO ABOUT</span>
        </button>
      </header>

      <!-- Hero Section -->
      <section class="hero-section" v-animate>
        <div class="glow-bg glow-top-right"></div>
        <div class="glow-bg glow-bottom-left"></div>

        <div class="hero-content">
          <div class="badge-pill">
            <span class="pulse-dot"></span>
            <span>3D æ¸²æŸ“ Â· å®æ—¶äº¤äº’</span>
          </div>

          <h1 class="hero-title">
            Three.js é­”æ–¹æ¸²æŸ“å¼•æ“<br />
            <span class="gradient-text">ç½‘é¡µç«¯å®æ—¶ 3D äº¤äº’å®ç°</span>
          </h1>

          <p class="hero-subtitle">
            æ¢ç´¢ CubeMaster å¦‚ä½•åˆ©ç”¨ Three.js å’Œ WebGL åœ¨æµè§ˆå™¨ä¸­å®ç°æµç•…çš„ 3D
            é­”æ–¹æ¸²æŸ“ã€ æ—‹è½¬åŠ¨ç”»å’Œäº¤äº’æ“ä½œï¼Œæä¾›æ²‰æµ¸å¼çš„å­¦ä¹ ä½“éªŒã€‚
          </p>

          <div class="stats-pills">
            <div class="stat-pill">
              <span class="dot-indicator blue"></span>
              <span>å¸§ç‡ï¼š60 FPS (ç¨³å®š)</span>
            </div>
            <div class="stat-pill">
              <span class="dot-indicator green"></span>
              <span>æ¸²æŸ“å¯¹è±¡ï¼š27 ä¸ªç«‹æ–¹ä½“ + 54 ä¸ªè‰²å—</span>
            </div>
            <div class="stat-pill">
              <span class="dot-indicator purple"></span>
              <span>åŠ è½½æ—¶é—´ï¼š&lt; 1.5 ç§’</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Core Architecture -->
      <section class="section-block" v-animate>
        <h2 class="section-heading">æ ¸å¿ƒæ¶æ„</h2>
        <div class="architecture-diagram">
          <div class="arch-layer">
            <div class="layer-header">
              <div class="layer-number">1</div>
              <h3>åœºæ™¯å›¾ (Scene Graph)</h3>
            </div>
            <div class="layer-content">
              <p>å±‚æ¬¡åŒ–å¯¹è±¡ç®¡ç†ï¼Œçˆ¶å­å…³ç³»å®šä¹‰é­”æ–¹å—çš„ç©ºé—´ä½ç½®</p>
              <ul>
                <li><strong>Scene</strong>ï¼šæ ¹å®¹å™¨ï¼ŒåŒ…å«æ‰€æœ‰æ¸²æŸ“å¯¹è±¡</li>
                <li><strong>Group</strong>ï¼šé­”æ–¹æ•´ä½“å®¹å™¨ï¼Œä¾¿äºæ•´ä½“å˜æ¢</li>
                <li>
                  <strong>Mesh</strong>ï¼š27 ä¸ªç«‹æ–¹ä½“ç½‘æ ¼ï¼Œæ¯ä¸ªä»£è¡¨ä¸€ä¸ªå°å—
                </li>
                <li><strong>Material</strong>ï¼šPBR æè´¨ï¼Œæ”¯æŒå…‰æ³½å’Œåå°„</li>
              </ul>
            </div>
          </div>

          <div class="arch-layer">
            <div class="layer-header">
              <div class="layer-number">2</div>
              <h3>æ¸²æŸ“ç®¡çº¿ (Render Pipeline)</h3>
            </div>
            <div class="layer-content">
              <p>WebGL åº•å±‚æ¸²æŸ“ä¼˜åŒ–ï¼Œç¡®ä¿æµç•…æ€§èƒ½</p>
              <ul>
                <li><strong>Renderer</strong>ï¼šWebGLRendererï¼Œç¡¬ä»¶åŠ é€Ÿ</li>
                <li><strong>Camera</strong>ï¼šPerspectiveCameraï¼Œé€è§†æŠ•å½±</li>
                <li><strong>Lighting</strong>ï¼šç¯å¢ƒå…‰ + æ–¹å‘å…‰ + ç‚¹å…‰æº</li>
                <li><strong>Shadow</strong>ï¼šè½¯é˜´å½±æ˜ å°„ï¼Œå¢å¼ºç«‹ä½“æ„Ÿ</li>
              </ul>
            </div>
          </div>

          <div class="arch-layer">
            <div class="layer-header">
              <div class="layer-number">3</div>
              <h3>äº¤äº’ç³»ç»Ÿ (Interaction)</h3>
            </div>
            <div class="layer-content">
              <p>ç”¨æˆ·è¾“å…¥å¤„ç†ä¸åŠ¨ç”»ç³»ç»Ÿ</p>
              <ul>
                <li><strong>Raycaster</strong>ï¼šé¼ æ ‡/è§¦æ‘¸ç‚¹å‡»æ£€æµ‹</li>
                <li><strong>OrbitControls</strong>ï¼šæ‘„åƒæœºè½¨é“æ§åˆ¶</li>
                <li>
                  <strong>Animation Loop</strong>ï¼šrequestAnimationFrame å¾ªç¯
                </li>
                <li><strong>Tweening</strong>ï¼šGSAP è¡¥é—´åŠ¨ç”»åº“</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- Cube Representation -->
      <section class="section-block" v-animate>
        <h2 class="section-heading">é­”æ–¹æ•°æ®ç»“æ„</h2>
        <div class="data-representation">
          <div class="data-card">
            <h3><span class="data-icon">ğŸ§Š</span> å‡ ä½•è¡¨ç¤º</h3>
            <div class="code-snippet">
              <pre><code>// ç”ŸæˆåŸºç¡€ 3x3 ç¦»æ•£ç‚¹é˜µåæ ‡ç³»
const generateBaseCubies = () => {
  const positions = [];
  for (let x = -1; x <= 1; x++) {
    for (let y = -1; y <= 1; y++) {
      for (let z = -1; z <= 1; z++) {
        positions.push({ x, y, z, type: getCubieType(x, y, z) });
      }
    }
  }
  return positions;
};

// å°æ–¹å—ç±»å‹åˆ†ç±»
const getCubieType = (x, y, z) => {
  const sum = Math.abs(x) + Math.abs(y) + Math.abs(z);
  if (sum === 3) return 'corner';     // è§’å— (x,y,z å‡ä¸ä¸º 0)
  if (sum === 2) return 'edge';       // æ£±å— (ä¸¤ä¸ªåæ ‡ä¸ä¸º 0)
  if (sum === 1) return 'center';     // ä¸­å¿ƒå— (ä¸€ä¸ªåæ ‡ä¸ä¸º 0)
  return 'core';                      // æ ¸å¿ƒå— (0,0,0)
};</code></pre>
            </div>
          </div>

          <div class="data-card">
            <h3><span class="data-icon">ğŸ¨</span> é¢œè‰²æ˜ å°„</h3>
            <ul>
              <li>
                <strong>æ ‡å‡†é…è‰²</strong
                >ï¼šç™½(U)ã€çº¢(R)ã€è“(B)ã€æ©™(O)ã€ç»¿(G)ã€é»„(D)
              </li>
              <li>
                <strong>æè´¨ç³»ç»Ÿ</strong>ï¼šæ¯ä¸ªé¢ç‹¬ç«‹ Materialï¼Œæ”¯æŒé«˜å…‰å’Œåå…‰
              </li>
              <li>
                <strong>çº¹ç†é€‰é¡¹</strong>ï¼šçº¯è‰²ã€ç£¨ç ‚ã€å…‰æ³½ã€åŠé€æ˜å¤šç§é¢„è®¾
              </li>
              <li><strong>çŠ¶æ€åŒæ­¥</strong>ï¼šé¢œè‰²æ•°ç»„ â†” 3D æ¸²æŸ“å®æ—¶åŒæ­¥</li>
            </ul>
            <div class="color-preview">
              <div class="color-swatch" style="background: #ffffff">U</div>
              <div class="color-swatch" style="background: #b71234">R</div>
              <div class="color-swatch" style="background: #0046ad">L</div>
              <div class="color-swatch" style="background: #ff5800">F</div>
              <div class="color-swatch" style="background: #009b48">B</div>
              <div class="color-swatch" style="background: #ffd500">D</div>
            </div>
          </div>
        </div>
      </section>

      <!-- Animation System -->
      <section class="section-block" v-animate>
        <h2 class="section-heading">åŠ¨ç”»ç³»ç»Ÿ</h2>
        <div class="animation-system">
          <div class="anim-card">
            <h3><span class="anim-icon">ğŸ”„</span> æ—‹è½¬åŠ¨ç”»</h3>
            <div class="code-snippet">
              <pre><code>// æ‰§è¡Œå•å±‚æ—‹è½¬åŠ¨ç”»
async function rotateLayer(layer, direction, angle = 90) {
  // 1. ç¡®å®šå—å½±å“çš„å°å—
  const affectedCubies = getCubiesInLayer(layer);
  
  // 2. åˆ›å»ºçˆ¶å®¹å™¨ï¼Œç»Ÿä¸€å˜æ¢
  const container = new THREE.Group();
  affectedCubies.forEach(cubie => container.add(cubie));
  scene.add(container);
  
  // 3. æ‰§è¡ŒåŠ¨ç”»
  return new Promise(resolve => {
    const duration = 300; // æ¯«ç§’
    const startTime = performance.now();
    
    function animate(currentTime) {
      const elapsed = currentTime - startTime;
      const progress = Math.min(elapsed / duration, 1);
      const eased = easeOutCubic(progress);
      
      // è®¡ç®—å½“å‰è§’åº¦
      const currentAngle = angle * eased * (direction === 'clockwise' ? 1 : -1);
      
      // åº”ç”¨æ—‹è½¬
      const axis = getAxisForLayer(layer);
      container.rotation[axis] = THREE.MathUtils.degToRad(currentAngle);
      
      if (progress < 1) {
        requestAnimationFrame(animate);
      } else {
        // åŠ¨ç”»å®Œæˆï¼Œæ›´æ–°é€»è¾‘çŠ¶æ€
        updateCubeStateAfterRotation(layer, direction);
        scene.remove(container);
        resolve();
      }
    }
    
    requestAnimationFrame(animate);
  });
}</code></pre>
            </div>
          </div>

          <div class="anim-card">
            <h3><span class="anim-icon">âš¡</span> æ€§èƒ½ä¼˜åŒ–</h3>
            <ul>
              <li>
                <strong>å¯¹è±¡å¤ç”¨</strong>ï¼šå‡ ä½•ä½“å’Œæè´¨å®ä¾‹å…±äº«ï¼Œå‡å°‘å†…å­˜å ç”¨
              </li>
              <li>
                <strong>æ‰¹é‡æ¸²æŸ“</strong>ï¼šä½¿ç”¨ InstancedMesh æ¸²æŸ“ç›¸åŒå‡ ä½•ä½“
              </li>
              <li><strong>å¸§ç‡æ§åˆ¶</strong>ï¼šé˜²æŠ–å¤„ç†ï¼Œé¿å…è¿‡åº¦æ¸²æŸ“</li>
              <li><strong>å†…å­˜ç®¡ç†</strong>ï¼šåŠæ—¶é‡Šæ”¾æœªä½¿ç”¨çš„çº¹ç†å’Œå‡ ä½•ä½“</li>
              <li><strong>ç¦»å±æ¸²æŸ“</strong>ï¼šé¢„è®¡ç®—å¤æ‚åœºæ™¯ï¼Œå‡å°‘è¿è¡Œæ—¶å¼€é”€</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- Interaction Implementation -->
      <section class="section-block" v-animate>
        <h2 class="section-heading">äº¤äº’å®ç°</h2>
        <div class="interaction-details">
          <div class="interaction-step">
            <div class="step-number">1</div>
            <div class="step-content">
              <h3>ç‚¹å‡»æ£€æµ‹</h3>
              <p>
                ä½¿ç”¨ Raycaster
                ä»é¼ æ ‡ä½ç½®å‘å°„å°„çº¿ï¼Œä¸é­”æ–¹å—æ±‚äº¤ï¼Œç¡®å®šç‚¹å‡»çš„é¢å’Œå±‚ã€‚
              </p>
              <div class="code-snippet small">
                <pre><code>const raycaster = new THREE.Raycaster();
raycaster.setFromCamera(mouse, camera);
const intersects = raycaster.intersectObjects(cubies);
if (intersects.length > 0) {
  const clickedCubie = intersects[0].object;
  const faceNormal = getClickedFace(intersects[0].face);
  return { cubie: clickedCubie, face: faceNormal };
}</code></pre>
              </div>
            </div>
          </div>

          <div class="interaction-step">
            <div class="step-number">2</div>
            <div class="step-content">
              <h3>æ‹–åŠ¨è¯†åˆ«</h3>
              <p>è·Ÿè¸ªé¼ æ ‡ç§»åŠ¨å‘é‡ï¼Œç¡®å®šæ—‹è½¬æ–¹å‘å’Œå±‚ï¼Œé˜ˆå€¼å¤„ç†é¿å…è¯¯æ“ä½œã€‚</p>
              <div class="code-snippet small">
                <pre><code>const dragVector = new THREE.Vector2(
  currentMouse.x - startMouse.x,
  currentMouse.y - startMouse.y
);
if (dragVector.length() > DRAG_THRESHOLD) {
  const axis = determineRotationAxis(dragVector, clickedFace);
  const direction = determineRotationDirection(dragVector, axis);
  rotateLayer(getLayerFromAxisAndFace(axis, clickedFace), direction);
}</code></pre>
              </div>
            </div>
          </div>

          <div class="interaction-step">
            <div class="step-number">3</div>
            <div class="step-content">
              <h3>åŠ¨ç”»é˜Ÿåˆ—</h3>
              <p>é¡ºåºæ‰§è¡Œæ—‹è½¬åŠ¨ç”»ï¼Œæ”¯æŒæ’¤é”€/é‡åšï¼Œç¡®ä¿çŠ¶æ€ä¸€è‡´æ€§ã€‚</p>
              <div class="code-snippet small">
                <pre><code>class AnimationQueue {
  constructor() {
    this.queue = [];
    this.isAnimating = false;
  }
  
  async add(animation) {
    this.queue.push(animation);
    if (!this.isAnimating) this.process();
  }
  
  async process() {
    this.isAnimating = true;
    while (this.queue.length > 0) {
      const animation = this.queue.shift();
      await animation();
    }
    this.isAnimating = false;
  }
}</code></pre>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Performance Metrics -->
      <section class="section-block" v-animate>
        <h2 class="section-heading">æ€§èƒ½æŒ‡æ ‡</h2>
        <div class="performance-metrics">
          <div class="metric-grid">
            <div class="metric-card">
              <div class="metric-value">60</div>
              <div class="metric-label">FPS</div>
              <div class="metric-desc">ç›®æ ‡å¸§ç‡ (vsync åŒæ­¥)</div>
            </div>
            <div class="metric-card">
              <div class="metric-value">&lt; 16ms</div>
              <div class="metric-label">å¸§æ—¶é—´</div>
              <div class="metric-desc">æ¯å¸§æ¸²æŸ“æ—¶é—´</div>
            </div>
            <div class="metric-card">
              <div class="metric-value">27</div>
              <div class="metric-label">ç»˜åˆ¶è°ƒç”¨</div>
              <div class="metric-desc">InstancedMesh ä¼˜åŒ–</div>
            </div>
            <div class="metric-card">
              <div class="metric-value">12MB</div>
              <div class="metric-label">å†…å­˜å ç”¨</div>
              <div class="metric-desc">å‡ ä½•ä½“ + çº¹ç† + ç¨‹åº</div>
            </div>
          </div>

          <div class="optimization-tips">
            <h3>ä¼˜åŒ–æŠ€å·§</h3>
            <ul>
              <li>
                <strong>å‡ ä½•ä½“åˆå¹¶</strong>ï¼šå°†å¤šä¸ª Mesh åˆå¹¶ä¸ºå•ä¸ªï¼Œå‡å°‘ draw
                calls
              </li>
              <li>
                <strong>çº¹ç†å›¾é›†</strong>ï¼šå°†å¤šä¸ªå°çº¹ç†åˆå¹¶ä¸ºå¤§å›¾ï¼Œå‡å°‘çº¹ç†åˆ‡æ¢
              </li>
              <li>
                <strong>ç»†èŠ‚å±‚æ¬¡ (LOD)</strong
                >ï¼šè¿œè·ç¦»ä½¿ç”¨ç®€åŒ–æ¨¡å‹ï¼Œæå‡æ¸²æŸ“é€Ÿåº¦
              </li>
              <li><strong>è§†é”¥å‰”é™¤</strong>ï¼šåªæ¸²æŸ“æ‘„åƒæœºå¯è§èŒƒå›´å†…çš„å¯¹è±¡</li>
              <li>
                <strong>WebWorker</strong>ï¼šå¤æ‚è®¡ç®—ç§»è‡³ Worker
                çº¿ç¨‹ï¼Œé¿å…é˜»å¡æ¸²æŸ“
              </li>
            </ul>
          </div>
        </div>
      </section>

      <!-- Challenges -->
      <section class="section-block" v-animate>
        <h2 class="section-heading">æŠ€æœ¯æŒ‘æˆ˜</h2>
        <div class="challenges-grid">
          <div class="challenge-card">
            <h3><span class="challenge-icon">ğŸ“±</span> ç§»åŠ¨ç«¯é€‚é…</h3>
            <p>
              <strong>é—®é¢˜</strong>ï¼šç§»åŠ¨è®¾å¤‡ GPU æ€§èƒ½æœ‰é™ï¼Œè§¦æ‘¸äº¤äº’ç²¾åº¦è¦æ±‚é«˜
            </p>
            <p>
              <strong>è§£å†³æ–¹æ¡ˆ</strong
              >ï¼šå“åº”å¼è®¾è®¡ï¼Œç®€åŒ–é˜´å½±å’Œåå°„ï¼Œå¢å¤§è§¦æ‘¸çƒ­åŒº
            </p>
          </div>
          <div class="challenge-card">
            <h3><span class="challenge-icon">ğŸŒ</span> æµè§ˆå™¨å…¼å®¹</h3>
            <p>
              <strong>é—®é¢˜</strong>ï¼šä¸åŒæµè§ˆå™¨ WebGL å®ç°å·®å¼‚ï¼Œæ‰©å±•æ”¯æŒä¸ä¸€è‡´
            </p>
            <p>
              <strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šç‰¹æ€§æ£€æµ‹ï¼Œæ¸è¿›å¢å¼ºï¼Œæä¾›é™çº§æ–¹æ¡ˆ (CSS
              3D)
            </p>
          </div>
          <div class="challenge-card">
            <h3><span class="challenge-icon">âš™ï¸</span> çŠ¶æ€åŒæ­¥</h3>
            <p><strong>é—®é¢˜</strong>ï¼š3D æ¸²æŸ“çŠ¶æ€ä¸é€»è¾‘çŠ¶æ€éœ€è¦ä¸¥æ ¼åŒæ­¥</p>
            <p>
              <strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šå•ä¸€æ•°æ®æºï¼ŒçŠ¶æ€å˜æ›´é€šè¿‡ä¸­å¤®æ§åˆ¶å™¨åˆ†å‘
            </p>
          </div>
        </div>
      </section>

      <!-- Navigation -->
      <section class="section-block navigation-section" v-animate>
        <h2 class="section-heading text-center">ç»§ç»­æ¢ç´¢</h2>
        <div class="nav-cards">
          <router-link to="/tech/yolo" class="nav-card">
            <div class="nav-icon">ğŸ‘ï¸</div>
            <h3>YOLOv8 è§†è§‰è¯†åˆ«</h3>
            <p>é­”æ–¹é¢œè‰²æ£€æµ‹æŠ€æœ¯è¯¦è§£</p>
          </router-link>
          <router-link to="/tech/kociemba" class="nav-card">
            <div class="nav-icon">ğŸ§©</div>
            <h3>Kociemba ç®—æ³•</h3>
            <p>é­”æ–¹ä¸¤é˜¶æ®µæ±‚è§£ç®—æ³•åŸç†</p>
          </router-link>
          <router-link to="/tech/architecture" class="nav-card">
            <div class="nav-icon">ğŸ—ï¸</div>
            <h3>ç³»ç»Ÿæ¶æ„</h3>
            <p>å‰åç«¯åˆ†ç¦»è®¾è®¡ä¸æ•°æ®æµ</p>
          </router-link>
        </div>
      </section>
    </div>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <button
      @click="scrollToTop"
      class="back-to-top-btn"
      :class="{ visible: showBackToTop }"
    >
      <el-icon><ArrowUp /></el-icon>
    </button>
  </div>
</template>

<script setup>
import { onMounted, onUnmounted, ref } from "vue";
import { useRouter } from "vue-router";
import { ArrowLeft, ArrowUp } from "@element-plus/icons-vue";

const router = useRouter();
const showBackToTop = ref(false);

// æ»šåŠ¨åŠ¨ç”»æŒ‡ä»¤
const vAnimate = {
  mounted: (el) => {
    el.classList.add("before-enter");
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            el.classList.add("enter");
            observer.unobserve(el);
          }
        });
      },
      { threshold: 0.1 },
    );
    observer.observe(el);
  },
};

// è¿”å› About é¡µé¢
const goBackToAbout = () => {
  router.push("/about");
};

// è¿”å›é¡¶éƒ¨
const scrollToTop = () => {
  window.scrollTo({ top: 0, behavior: "smooth" });
};

// ç›‘å¬æ»šåŠ¨æ˜¾ç¤ºè¿”å›é¡¶éƒ¨æŒ‰é’®
const handleScroll = () => {
  showBackToTop.value = window.scrollY > 300;
};

onMounted(() => {
  window.addEventListener("scroll", handleScroll);
  // åˆå§‹æ£€æŸ¥
  handleScroll();
});

onUnmounted(() => {
  window.removeEventListener("scroll", handleScroll);
});
</script>

<style scoped>
/* === åŸºç¡€æ ·å¼ (ä» TechYolo.vue å¤åˆ¶) === */
.tech-doc-page {
  width: 100%;
  min-height: 100vh;
  background-color: #f8fafc;
  font-family: "Inter", sans-serif;
  color: #0f172a;
  padding-bottom: 100px;
  overflow-x: hidden;
}

.page-container {
  max-width: 1000px;
  margin: 0 auto;
  padding: 0 24px;
}

/* åŠ¨ç”»ç±» */
.before-enter {
  opacity: 0;
  transform: translateY(30px);
  transition: all 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
}
.enter {
  opacity: 1;
  transform: translateY(0);
}

/* Hero Section */
.hero-section {
  position: relative;
  padding: 80px 0 60px;
  overflow: hidden;
  border-radius: 32px;
  margin-bottom: 60px;
}

.glow-bg {
  position: absolute;
  width: 400px;
  height: 400px;
  border-radius: 50%;
  filter: blur(80px);
  opacity: 0.15;
  z-index: 0;
}
.glow-top-right {
  top: -100px;
  right: -100px;
  background: #3b82f6;
}
.glow-bottom-left {
  bottom: -100px;
  left: -100px;
  background: #10b981;
}

.hero-content {
  position: relative;
  z-index: 1;
  max-width: 800px;
  margin: 0 auto;
}

.badge-pill {
  display: inline-flex;
  align-items: center;
  padding: 6px 16px;
  background: rgba(37, 99, 235, 0.1);
  color: #2563eb;
  border-radius: 100px;
  font-size: 15px;
  font-weight: 600;
  margin-bottom: 24px;
}

.pulse-dot {
  width: 8px;
  height: 8px;
  background: #2563eb;
  border-radius: 50%;
  margin-right: 8px;
  box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.7);
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0% {
    box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.4);
  }
  70% {
    box-shadow: 0 0 0 6px rgba(37, 99, 235, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(37, 99, 235, 0);
  }
}

.hero-title {
  font-size: 3rem;
  font-weight: 800;
  line-height: 1.1;
  margin-bottom: 24px;
  letter-spacing: -0.02em;
}

.gradient-text {
  background: linear-gradient(135deg, #1e293b 0%, #3b82f6 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.hero-subtitle {
  font-size: 1.25rem;
  color: #64748b;
  line-height: 1.6;
  margin-bottom: 40px;
}

.stats-pills {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
}

.stat-pill {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 20px;
  background: rgba(255, 255, 255, 0.6);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.8);
  border-radius: 12px;
  font-size: 14px;
  font-weight: 600;
  color: #334155;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
}

.dot-indicator {
  width: 8px;
  height: 8px;
  border-radius: 50%;
}
.dot-indicator.blue {
  background: #3b82f6;
}
.dot-indicator.green {
  background: #10b981;
}
.dot-indicator.purple {
  background: #8b5cf6;
}

/* é€šç”¨ Section */
.section-block {
  margin-bottom: 100px;
}
.section-heading {
  font-size: 2rem;
  font-weight: 800;
  color: #0f172a;
  margin-bottom: 40px;
}
.text-center {
  text-align: center;
}

/* æŠ€æœ¯æ¦‚è§ˆç½‘æ ¼ */
.tech-overview-card {
  background: #ffffff;
  border-radius: 24px;
  padding: 40px;
  border: 1px solid #e2e8f0;
}

.overview-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 30px;
}

@media (max-width: 768px) {
  .overview-grid {
    grid-template-columns: 1fr;
  }
}

.overview-item {
  text-align: center;
}

.overview-icon {
  font-size: 2.5rem;
  margin-bottom: 16px;
}

.overview-item h3 {
  font-size: 1.25rem;
  font-weight: 700;
  margin-bottom: 12px;
  color: #1e293b;
}

.overview-item p {
  color: #64748b;
  line-height: 1.6;
}

/* å·¥ä½œæµç¨‹ */
.workflow-diagram {
  background: #ffffff;
  border-radius: 24px;
  padding: 40px;
  border: 1px solid #e2e8f0;
}

.workflow-step {
  display: flex;
  align-items: center;
  gap: 24px;
  margin-bottom: 30px;
  padding-bottom: 30px;
  border-bottom: 1px solid #f1f5f9;
}
.workflow-step:last-child {
  margin-bottom: 0;
  padding-bottom: 0;
  border-bottom: none;
}

.step-number {
  width: 50px;
  height: 50px;
  background: #3b82f6;
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  font-weight: 800;
  flex-shrink: 0;
}

.step-content h3 {
  font-size: 1.25rem;
  font-weight: 700;
  margin-bottom: 8px;
  color: #1e293b;
}

.step-content p {
  color: #64748b;
  line-height: 1.6;
}

/* è®­ç»ƒè¯¦æƒ… */
.training-details {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 24px;
}

@media (max-width: 992px) {
  .training-details {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 768px) {
  .training-details {
    grid-template-columns: 1fr;
  }
}

.detail-card {
  background: #ffffff;
  border-radius: 20px;
  padding: 30px;
  border: 1px solid #e2e8f0;
}

.detail-card h3 {
  font-size: 1.25rem;
  font-weight: 700;
  margin-bottom: 20px;
  color: #1e293b;
  display: flex;
  align-items: center;
  gap: 10px;
}

.detail-card ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.detail-card li {
  margin-bottom: 12px;
  color: #64748b;
  line-height: 1.6;
  padding-left: 0;
}

.detail-card li strong {
  color: #1e293b;
}

/* é›†æˆå¡ç‰‡ */
.integration-card {
  background: #ffffff;
  border-radius: 24px;
  padding: 40px;
  border: 1px solid #e2e8f0;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 40px;
}

.code-snippet {
  background: #0f172a;
  border-radius: 16px;
  overflow: hidden;
}

.snippet-header {
  background: #1e293b;
  color: #cbd5e1;
  padding: 16px 24px;
  font-size: 14px;
  font-weight: 600;
}

.code-snippet pre {
  margin: 0;
  padding: 24px;
  overflow-x: auto;
}

.code-snippet code {
  font-family: "JetBrains Mono", monospace;
  font-size: 14px;
  color: #e2e8f0;
  line-height: 1.6;
}

.integration-note h3 {
  font-size: 1.25rem;
  font-weight: 700;
  margin-bottom: 20px;
  color: #1e293b;
}

.integration-note ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.integration-note li {
  margin-bottom: 12px;
  color: #64748b;
  line-height: 1.6;
  padding-left: 0;
}

.integration-note li strong {
  color: #1e293b;
}

/* æŒ‘æˆ˜ç½‘æ ¼ */
.challenges-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 24px;
}

@media (max-width: 992px) {
  .challenges-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 768px) {
  .challenges-grid {
    grid-template-columns: 1fr;
  }
}

.challenge-card {
  background: #ffffff;
  border-radius: 20px;
  padding: 30px;
  border: 1px solid #e2e8f0;
}

.challenge-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 20px;
}

.challenge-emoji {
  font-size: 2rem;
}

.challenge-card h3 {
  font-size: 1.25rem;
  font-weight: 700;
  color: #1e293b;
  margin: 0;
}

.challenge-card p {
  color: #64748b;
  line-height: 1.6;
  margin-bottom: 12px;
}

/* å¯¼èˆªå¡ç‰‡ */
.navigation-section {
  margin-top: 80px;
}

.nav-cards {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 24px;
}

@media (max-width: 768px) {
  .nav-cards {
    grid-template-columns: 1fr;
  }
}

.nav-card {
  background: #ffffff;
  border-radius: 20px;
  padding: 30px;
  border: 1px solid #e2e8f0;
  text-decoration: none;
  color: inherit;
  transition: all 0.3s;
  text-align: center;
}

.nav-card:hover {
  transform: translateY(-5px);
  border-color: #3b82f6;
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
}

.nav-icon {
  font-size: 2.5rem;
  margin-bottom: 16px;
}

.nav-card h3 {
  font-size: 1.25rem;
  font-weight: 700;
  margin-bottom: 8px;
  color: #1e293b;
}

.nav-card p {
  color: #64748b;
  font-size: 0.95rem;
}

/* å“åº”å¼åŸºç¡€ */
@media (max-width: 768px) {
  .hero-title {
    font-size: 2.5rem;
  }
  .integration-card {
    grid-template-columns: 1fr;
  }
}

/* === ç‰¹å®šäº Three.js é¡µé¢çš„æ ·å¼ === */

/* æ¶æ„å›¾ç¤º */
.architecture-diagram {
  display: flex;
  flex-direction: column;
  gap: 24px;
  background: #ffffff;
  border-radius: 24px;
  padding: 40px;
  border: 1px solid #e2e8f0;
}

.arch-layer {
  display: flex;
  gap: 24px;
  padding: 30px;
  background: #f8fafc;
  border-radius: 20px;
  border-left: 4px solid #3b82f6;
}

.layer-header {
  display: flex;
  align-items: center;
  gap: 16px;
  min-width: 200px;
}

.layer-number {
  width: 40px;
  height: 40px;
  background: #3b82f6;
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.25rem;
  font-weight: 800;
  flex-shrink: 0;
}

.layer-header h3 {
  font-size: 1.25rem;
  font-weight: 800;
  color: #1e293b;
  margin: 0;
}

.layer-content {
  flex: 1;
}

.layer-content p {
  color: #64748b;
  margin-bottom: 16px;
  font-weight: 600;
}

.layer-content ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.layer-content li {
  color: #64748b;
  margin-bottom: 8px;
  padding-left: 0;
}

.layer-content li strong {
  color: #1e293b;
}

/* æ•°æ®è¡¨ç¤º */
.data-representation {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 40px;
}

.data-card {
  background: #ffffff;
  border-radius: 20px;
  padding: 30px;
  border: 1px solid #e2e8f0;
}

.data-card h3 {
  font-size: 1.25rem;
  font-weight: 700;
  margin-bottom: 20px;
  color: #1e293b;
  display: flex;
  align-items: center;
  gap: 10px;
}

.code-snippet {
  background: #0f172a;
  border-radius: 16px;
  overflow: hidden;
}

.code-snippet pre {
  margin: 0;
  padding: 24px;
  overflow-x: auto;
}

.code-snippet code {
  font-family: "JetBrains Mono", monospace;
  font-size: 14px;
  color: #e2e8f0;
  line-height: 1.6;
}

.data-card ul {
  list-style: none;
  padding: 0;
  margin: 0 0 20px 0;
}

.data-card li {
  margin-bottom: 12px;
  color: #64748b;
  line-height: 1.6;
  padding-left: 0;
}

.data-card li strong {
  color: #1e293b;
}

.color-preview {
  display: flex;
  gap: 12px;
  margin-top: 20px;
}

.color-swatch {
  width: 50px;
  height: 50px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  color: rgba(0, 0, 0, 0.7);
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  border: 2px solid rgba(255, 255, 255, 0.8);
}

/* åŠ¨ç”»ç³»ç»Ÿ */
.animation-system {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 40px;
}

.anim-card {
  background: #ffffff;
  border-radius: 20px;
  padding: 30px;
  border: 1px solid #e2e8f0;
}

.anim-card h3 {
  font-size: 1.25rem;
  font-weight: 700;
  margin-bottom: 20px;
  color: #1e293b;
  display: flex;
  align-items: center;
  gap: 10px;
}

/* äº¤äº’æ­¥éª¤ */
.interaction-details {
  background: #ffffff;
  border-radius: 24px;
  padding: 40px;
  border: 1px solid #e2e8f0;
}

.interaction-step {
  display: flex;
  gap: 24px;
  margin-bottom: 40px;
  padding-bottom: 40px;
  border-bottom: 1px solid #f1f5f9;
}
.interaction-step:last-child {
  margin-bottom: 0;
  padding-bottom: 0;
  border-bottom: none;
}

.step-number {
  width: 50px;
  height: 50px;
  background: #3b82f6;
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  font-weight: 800;
  flex-shrink: 0;
}

.step-content {
  flex: 1;
}

.step-content h3 {
  font-size: 1.25rem;
  font-weight: 700;
  margin-bottom: 12px;
  color: #1e293b;
}

.step-content p {
  color: #64748b;
  margin-bottom: 20px;
  line-height: 1.6;
}

.code-snippet.small {
  background: #0f172a;
  border: 1px solid #334155;
}

.code-snippet.small pre {
  padding: 16px;
}

.code-snippet.small code {
  color: #e2e8f0;
  font-size: 13px;
}

/* æ€§èƒ½æŒ‡æ ‡ */
.performance-metrics {
  background: #ffffff;
  border-radius: 24px;
  padding: 40px;
  border: 1px solid #e2e8f0;
}

.metric-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 24px;
  margin-bottom: 40px;
}

.metric-card {
  background: #f8fafc;
  border-radius: 16px;
  padding: 30px;
  text-align: center;
  border: 1px solid #e2e8f0;
}

.metric-value {
  font-size: 2.5rem;
  font-weight: 800;
  color: #3b82f6;
  margin-bottom: 8px;
}

.metric-label {
  font-size: 1rem;
  font-weight: 700;
  color: #1e293b;
  margin-bottom: 8px;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.metric-desc {
  font-size: 0.9rem;
  color: #64748b;
}

.optimization-tips h3 {
  font-size: 1.25rem;
  font-weight: 700;
  margin-bottom: 20px;
  color: #1e293b;
}

.optimization-tips ul {
  list-style: none;
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 16px;
}

@media (max-width: 768px) {
  .optimization-tips ul {
    grid-template-columns: 1fr;
  }
}

.optimization-tips li {
  color: #64748b;
  line-height: 1.6;
  padding-left: 24px;
  position: relative;
}

.optimization-tips li:before {
  content: "âœ“";
  color: #10b981;
  position: absolute;
  left: 0;
  font-weight: bold;
}

.optimization-tips li strong {
  color: #1e293b;
}

/* æŒ‘æˆ˜ç½‘æ ¼ */
.challenges-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 24px;
}

@media (max-width: 992px) {
  .challenges-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 768px) {
  .challenges-grid {
    grid-template-columns: 1fr;
  }
}

.challenge-card {
  background: #ffffff;
  border-radius: 20px;
  padding: 30px;
  border: 1px solid #e2e8f0;
}

.challenge-card h3 {
  font-size: 1.25rem;
  font-weight: 700;
  margin-bottom: 16px;
  color: #1e293b;
  display: flex;
  align-items: center;
  gap: 10px;
}

.challenge-card p {
  color: #64748b;
  line-height: 1.6;
  margin-bottom: 12px;
}

/* å¯¼èˆªå¡ç‰‡ */
.navigation-section {
  margin-top: 80px;
}

.nav-cards {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 24px;
}

@media (max-width: 768px) {
  .nav-cards {
    grid-template-columns: 1fr;
  }
}

.nav-card {
  background: #ffffff;
  border-radius: 20px;
  padding: 30px;
  border: 1px solid #e2e8f0;
  text-decoration: none;
  color: inherit;
  transition: all 0.3s;
  text-align: center;
}

.nav-card:hover {
  transform: translateY(-5px);
  border-color: #3b82f6;
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
}

.nav-icon {
  font-size: 2.5rem;
  margin-bottom: 16px;
}

.nav-card h3 {
  font-size: 1.25rem;
  font-weight: 700;
  margin-bottom: 8px;
  color: #1e293b;
}

.nav-card p {
  color: #64748b;
  font-size: 0.95rem;
}

/* å“åº”å¼ */
@media (max-width: 992px) {
  .architecture-diagram {
    padding: 24px;
  }
  .arch-layer {
    flex-direction: column;
    gap: 16px;
  }
  .data-representation,
  .animation-system {
    grid-template-columns: 1fr;
  }
  .metric-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  .challenges-grid {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 576px) {
  .metric-grid {
    grid-template-columns: 1fr;
  }
}

/* æŠ€æœ¯æ–‡æ¡£å¤´éƒ¨å’Œè¿”å›æŒ‰é’® */
.tech-doc-header {
  margin-top: 30px;
  margin-bottom: 20px;
}

.minimal-back-btn {
  background: none;
  border: none;
  display: flex;
  align-items: center;
  gap: 8px;
  color: #94a3b8;
  font-weight: 700;
  font-size: 14px;
  letter-spacing: 1px;
  cursor: pointer;
  margin-bottom: 12px;
  transition: color 0.3s;
}
.minimal-back-btn:hover {
  color: #3b82f6;
}

/* è¿”å›é¡¶éƒ¨æŒ‰é’® */
.back-to-top-btn {
  position: fixed;
  bottom: 40px;
  right: 40px;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: #3b82f6;
  border: none;
  color: white;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
  opacity: 0;
  transform: translateY(20px);
  transition: all 0.3s ease;
  z-index: 1000;
}
.back-to-top-btn.visible {
  opacity: 1;
  transform: translateY(0);
}
.back-to-top-btn:hover {
  background: #2563eb;
  transform: translateY(-3px);
  box-shadow: 0 6px 16px rgba(59, 130, 246, 0.4);
}

/* ç§»åŠ¨ç«¯é€‚é… */
@media (max-width: 768px) {
  .back-to-top-btn {
    bottom: 20px;
    right: 20px;
    width: 45px;
    height: 45px;
  }
}

/* ==================== Dark Mode Styles ==================== */
[data-theme="dark"] .tech-doc-page {
  background-color: var(--dm-bg-page);
  color: var(--dm-text-primary);
}

[data-theme="dark"] .hero-section {
  background: transparent;
}

[data-theme="dark"] .badge-pill {
  background: rgba(59, 130, 246, 0.15);
  color: var(--dm-accent);
}

[data-theme="dark"] .pulse-dot {
  background: var(--dm-accent);
}

[data-theme="dark"] .hero-title {
  color: var(--dm-text-primary);
}

[data-theme="dark"] .gradient-text {
  background: linear-gradient(
    135deg,
    var(--dm-text-primary) 0%,
    var(--dm-accent) 100%
  );
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

[data-theme="dark"] .hero-subtitle {
  color: var(--dm-text-secondary);
}

[data-theme="dark"] .stat-pill {
  background: var(--dm-glass-bg);
  border-color: var(--dm-glass-border);
  color: var(--dm-text-secondary);
}

[data-theme="dark"] .section-heading {
  color: var(--dm-text-primary);
}

[data-theme="dark"] .architecture-diagram {
  background: var(--dm-bg-card);
  border-color: var(--dm-border);
}

[data-theme="dark"] .arch-layer {
  background: var(--dm-bg-hover);
  border-left-color: var(--dm-accent);
}

[data-theme="dark"] .layer-header h3 {
  color: var(--dm-text-primary);
}

[data-theme="dark"] .layer-content p {
  color: var(--dm-text-secondary);
}

[data-theme="dark"] .layer-content li {
  color: var(--dm-text-secondary);
}

[data-theme="dark"] .data-card {
  background: var(--dm-bg-card);
  border-color: var(--dm-border);
}

[data-theme="dark"] .data-card h3 {
  color: var(--dm-text-primary);
}

[data-theme="dark"] .code-snippet {
  background: #0f172a;
}

[data-theme="dark"] .code-snippet code {
  color: #e2e8f0;
}

[data-theme="dark"] .data-card li {
  color: var(--dm-text-secondary);
}

[data-theme="dark"] .data-card li strong {
  color: var(--dm-text-primary);
}

[data-theme="dark"] .color-swatch {
  border-color: var(--dm-border);
}

[data-theme="dark"] .anim-card {
  background: var(--dm-bg-card);
  border-color: var(--dm-border);
}

[data-theme="dark"] .anim-card h3 {
  color: var(--dm-text-primary);
}

[data-theme="dark"] .interaction-details {
  background: var(--dm-bg-card);
  border-color: var(--dm-border);
}

[data-theme="dark"] .interaction-step {
  border-bottom-color: var(--dm-border);
}

[data-theme="dark"] .step-content h3 {
  color: var(--dm-text-primary);
}

[data-theme="dark"] .step-content p {
  color: var(--dm-text-secondary);
}

[data-theme="dark"] .code-snippet.small {
  background: #0f172a;
  border-color: var(--dm-border);
}

[data-theme="dark"] .performance-metrics {
  background: var(--dm-bg-card);
  border-color: var(--dm-border);
}

[data-theme="dark"] .metric-card {
  background: var(--dm-bg-hover);
  border-color: var(--dm-border);
}

[data-theme="dark"] .metric-value {
  color: var(--dm-accent);
}

[data-theme="dark"] .metric-label {
  color: var(--dm-text-primary);
}

[data-theme="dark"] .metric-desc {
  color: var(--dm-text-muted);
}

[data-theme="dark"] .optimization-tips h3 {
  color: var(--dm-text-primary);
}

[data-theme="dark"] .optimization-tips li {
  color: var(--dm-text-secondary);
}

[data-theme="dark"] .optimization-tips li:before {
  color: #34d399;
}

[data-theme="dark"] .optimization-tips li strong {
  color: var(--dm-text-primary);
}

[data-theme="dark"] .challenge-card {
  background: var(--dm-bg-card);
  border-color: var(--dm-border);
}

[data-theme="dark"] .challenge-card h3 {
  color: var(--dm-text-primary);
}

[data-theme="dark"] .challenge-card p {
  color: var(--dm-text-secondary);
}

[data-theme="dark"] .nav-card {
  background: var(--dm-bg-card);
  border-color: var(--dm-border);
}

[data-theme="dark"] .nav-card:hover {
  border-color: var(--dm-accent);
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3);
}

[data-theme="dark"] .nav-card h3 {
  color: var(--dm-text-primary);
}

[data-theme="dark"] .nav-card p {
  color: var(--dm-text-muted);
}

[data-theme="dark"] .minimal-back-btn {
  color: var(--dm-text-muted);
}

[data-theme="dark"] .minimal-back-btn:hover {
  color: var(--dm-accent);
}

[data-theme="dark"] .back-to-top-btn {
  background: var(--dm-accent);
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
}

[data-theme="dark"] .back-to-top-btn:hover {
  background: var(--dm-accent-hover);
  box-shadow: 0 6px 16px rgba(59, 130, 246, 0.4);
}
</style>
